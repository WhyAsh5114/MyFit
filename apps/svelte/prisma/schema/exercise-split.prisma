model ExerciseSplit {
  id        String             @id @default(uuid())
  user      User               @relation(fields: [userId], references: [id])
  name      String
  userId    String
  splitDays ExerciseSplitDay[]
}

model ExerciseSplitDay {
  id               String                    @id @default(uuid())
  dayIndex         Int
  exerciseSplit    ExerciseSplit             @relation(fields: [exerciseSplitId], references: [id])
  exerciseSplitId  String
  splitDaySessions ExerciseSplitDaySession[]

  @@unique([exerciseSplitId, dayIndex])
}

model ExerciseSplitDaySession {
  id                 String                            @id @default(uuid())
  name               String
  sessionIndex       Int
  exerciseSplitDay   ExerciseSplitDay                  @relation(fields: [exerciseSplitDayId], references: [id])
  exerciseSplitDayId String
  exercises          ExerciseSplitDaySessionExercise[]

  @@unique([exerciseSplitDayId, sessionIndex])
}

model ExerciseSplitDaySessionExercise {
  id                        String                  @id @default(uuid())
  exerciseIndex             Int
  name                      String
  primaryMuscleGroup        String
  repRangeStart             Int
  repRangeEnd               Int
  setType                   SetType
  exerciseSplitDaySession   ExerciseSplitDaySession @relation(fields: [exerciseSplitDaySessionId], references: [id])
  exerciseSplitDaySessionId String

  notes                 ExerciseSplitDaySessionExerciseNote[]
  secondaryMuscleGroups ExerciseSplitDaySessionExerciseSecondaryMuscleGroup[]

  @@unique([exerciseSplitDaySessionId, exerciseIndex])
}

model ExerciseSplitDaySessionExerciseNote {
  id         String                          @id @default(uuid())
  exercise   ExerciseSplitDaySessionExercise @relation(fields: [exerciseId], references: [id], onDelete: Cascade)
  exerciseId String
  note       String
  noteIndex  Int
}

model ExerciseSplitDaySessionExerciseSecondaryMuscleGroup {
  id          String                          @id @default(uuid())
  exercise    ExerciseSplitDaySessionExercise @relation(fields: [exerciseId], references: [id], onDelete: Cascade)
  exerciseId  String
  muscleGroup String

  @@unique([exerciseId, muscleGroup])
}
